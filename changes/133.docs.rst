Add a lot of docs, make a few small code fixes so the examples actually work.
